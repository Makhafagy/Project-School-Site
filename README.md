# Project-School-Site
CPSC 332 Term Project Final Report
Created by:
Mahmoud Khafagy mahmoudk@csu.fullerton.edu CWID: 0863
Vong Chen vchen7@csu.fullerton.edu CWID: 2785
Ethan Bockler ethanbockler@csu.fullerton.edu CWID: 4869
Account: cs332s13
http://ecs.fullerton.edu/~cs332s13/
The intended purpose of this project is to create a full analysis of database diagrams with screenshots of working database and interface.
12 December 2021
1. The ER Diagram design of University Database
2. The Relational model of University Database
3. The SQL Queries and DDL
-----------------------------------------------------------------------------------------------------------------
Create Tables -- delete exingting tables DROP TABLE IF EXISTS Degrees; DROP TABLE IF EXISTS Prerequisites; DROP TABLE IF EXISTS Enrollment; DROP TABLE IF EXISTS Sections; DROP TABLE IF EXISTS Courses; DROP TABLE IF EXISTS Minor; DROP TABLE IF EXISTS Students; DROP TABLE IF EXISTS Departments; DROP TABLE IF EXISTS Professors; -- Creating table Professors CREATE TABLE Professors ( SSN INT NOT NULL, NAME TEXT NOT NULL, TITLE TEXT, SEX TEXT, SALARY FLOAT NOT NULL, STREET TEXT NOT NULL, CITY TEXT NOT NULL, ZIP INT NOT NULL, STATE TEXT NOT NULL, TEL_AREA INT(3) NOT NULL, TEL_DIGITS INT(7) NOT NULL, PRIMARY KEY (SSN) ); -- Creating table Departments CREATE TABLE Departments ( DNUM INT(5) NOT NULL, NAME TEXT NOT NULL, D_PHONE NUMERIC(10) NOT NULL, LOCATION TEXT NOT NULL, CHAIR_SSN INT(9) NOT NULL, PRIMARY KEY (DNUM), FOREIGN KEY (CHAIR_SSN) REFERENCES Professors (SSN) ); -- Creating table Courses CREATE TABLE Courses ( CNUM INT(5) NOT NULL, TITLE TEXT NOT NULL, TEXTBOOK TEXT NOT NULL,
UNITS NUMERIC(4) NOT NULL, C_DNUM INT(5) NOT NULL, PRIMARY KEY (CNUM), FOREIGN KEY (C_DNUM) REFERENCES Departments (DNUM) ); -- Creating table Students CREATE TABLE Students ( CWID INT(8) NOT NULL, FNAME TEXT NOT NULL, LNAME TEXT NOT NULL, S_PHONE NUMERIC(10) NOT NULL, S_ADDR TEXT NOT NULL, S_DNUM INT(5) NOT NULL, PRIMARY KEY (CWID), FOREIGN KEY (S_DNUM) REFERENCES Departments (DNUM) ); -- Creating table Sections CREATE TABLE Sections ( SNUM INT(4) NOT NULL, CLASSROOM TEXT NOT NULL, SEATS INT NOT NULL, MEETING TEXT NOT NULL, BEGIN_TIME TEXT NOT NULL, END_TIME TEXT NOT NULL, S_CNUM INT(5) NOT NULL, S_SSN INT(9) NOT NULL, PRIMARY KEY (SNUM), FOREIGN KEY (S_CNUM) REFERENCES Courses (CNUM), FOREIGN KEY (S_SSN) REFERENCES Professors (SSN) ); -- Creating table Enrollment CREATE TABLE Enrollment ( GRADE TEXT NOT NULL, E_CWID INT(8) NOT NULL, E_SNUM INT(4) NOT NULL, FOREIGN KEY (E_CWID) REFERENCES Students (CWID), FOREIGN KEY (E_SNUM) REFERENCES Sections (SNUM) ); -- Creating table Minor CREATE TABLE Minor ( M_CWID INT(8) NOT NULL, M_DNUM INT(5) NOT NULL, FOREIGN KEY (M_CWID) REFERENCES Students (CWID),
FOREIGN KEY (M_DNUM) REFERENCES Departments (DNUM) ); -- Creating table Prerequisite courses CREATE TABLE Prerequisites ( P_CNUM INT(5) NOT NULL, PRE TEXT NOT NULL, FOREIGN KEY (P_CNUM) REFERENCES Courses (CNUM) ); -- Creating table Degrees CREATE TABLE Degrees ( D_SSN INT(9) NOT NULL, DEGREE TEXT NOT NULL, FOREIGN KEY (D_SSN) REFERENCES Professors (SSN) );
-----------------------------------------------------------------------------------------------------------------
Insert Values -- Inserting Students 8 datas INSERT INTO Students VALUES ('11111111', 'Denny', 'Laurus', '9092457789', '9533 Bolsa Avenue Westminster CA 92683', '12158'); INSERT INTO Students VALUES ('22222222', 'Lenny', 'Yen', '9493332568', '24035 El Toro Road Laguna Hills CA 92653', '18355'); INSERT INTO Students VALUES ('33333333', 'Jimmy', 'Chan', '9490205786', '21405 McGaw Avenue Irvine CA 92604', '18355'); INSERT INTO Students VALUES ('44444444', 'Kyle', 'Venmort', '7148638551', '1877 McFadden Avenue Santa Ana CA 92705', '12158'); INSERT INTO Students VALUES ('55555555', 'Smiley', 'Coco', '7148108558', '12332 South Coast Drive Costa Mesa CA 92626', '12158'); INSERT INTO Students VALUES ('66666666', 'Jennie', 'Pham', '9094330235', '8221 Katella Avenue Garden Grove CA 92841', '18355'); INSERT INTO Students VALUES ('77777777', 'Mandy', 'Jonhson', '5624415820', '1456 La Grand Avenue Garden Grove CA 92841', '12158'); INSERT INTO Students VALUES ('88888888', 'Laura', 'Smichel', '9492082241', '2015 Lake Side Drive La Habra CA 90631', '18355'); -- Inserting Departments 2 datas INSERT INTO Departments VALUES ('12158', 'Computer Science', '6572783700', 'CS-522', '215468527'); INSERT INTO Departments VALUES ('18355', 'Mathematics', '6572783631', 'MH-154', '315367375'); -- Inserting Professors 3 datas INSERT INTO Professors VALUES ('215468527', 'Shawn Wang', 'Dr.', 'M', '90000', '20 Fullerton St', 'Fullerton', '31624', 'CA', '657', '3561871'); INSERT INTO Professors VALUES ('315367375', 'Matthew Varney', 'Mr.', 'M', '80000', '35 Fullerton St', 'Fullerton', '31624', 'CA', '657', '2185264');
INSERT INTO Professors VALUES ('834721652', 'Stacy Morrow', 'Ms.', 'F', '85000', '40 Fullerton St', 'Fullerton', '31624', 'CA', '657', '2943087'); -- Inserting Courses 4 datas INSERT INTO Courses VALUES ('01242', 'CPSC332', 'Database Systems', '4', '12158'); INSERT INTO Courses VALUES ('71236', 'CPSC485', 'An Intro to Computational Bioinformatics', '3', '12158'); INSERT INTO Courses VALUES ('38123', 'MATH270A', 'Discrete Mathematics', '3', '18355'); INSERT INTO Courses VALUES ('45892', 'MATH338', 'An Intro to Statistics', '4', '18355'); -- Inserting Sections 6 datas INSERT INTO Sections VALUES ('1833', 'CS-200', '30', 'M W', '10:00', '12:00', '01242', '215468527'); INSERT INTO Sections VALUES ('1844', 'CS-220', '32', 'T TH', '13:00 ', '15:00', '71236', '215468527'); INSERT INTO Sections VALUES ('1853', 'CS-330', '25', 'M W', '16:00', '18:00', '01242', '215468527'); INSERT INTO Sections VALUES ('1862', 'MH-115', '36', 'M W F', '8:00', '11:00', '38123', '315367375'); INSERT INTO Sections VALUES ('1873', 'MH-120', '27', 'T TH', '14:00', '15:00', '45892', '834721652'); INSERT INTO Sections VALUES ('1875', 'MH-120', '28', 'M W', '19:00', '20:00', '45892', '834721652'); -- Inserting Enrollment 20 datas INSERT INTO Enrollment VALUES ('A-', '11111111', '1833'); INSERT INTO Enrollment VALUES ('B', '44444444', '1833'); INSERT INTO Enrollment VALUES ('B+', '66666666', '1833'); INSERT INTO Enrollment VALUES ('C', '88888888', '1844'); INSERT INTO Enrollment VALUES ('F', '77777777', '1844'); INSERT INTO Enrollment VALUES ('C', '44444444', '1853'); INSERT INTO Enrollment VALUES ('B-', '33333333', '1853'); INSERT INTO Enrollment VALUES ('D', '22222222', '1853'); INSERT INTO Enrollment VALUES ('A+', '66666666', '1862'); INSERT INTO Enrollment VALUES ('B', '55555555', '1862'); INSERT INTO Enrollment VALUES ('C+', '33333333', '1862'); INSERT INTO Enrollment VALUES ('C-', '22222222', '1862'); INSERT INTO Enrollment VALUES ('A-', '44444444', '1873'); INSERT INTO Enrollment VALUES ('B-', '55555555', '1873'); INSERT INTO Enrollment VALUES ('C', '88888888', '1873'); INSERT INTO Enrollment VALUES ('D+', '77777777', '1873'); INSERT INTO Enrollment VALUES ('F', '22222222', '1875'); INSERT INTO Enrollment VALUES ('B', '11111111', '1875'); INSERT INTO Enrollment VALUES ('D-', '33333333', '1875'); INSERT INTO Enrollment VALUES ('C+', '66666666', '1875'); -- Inserting Minor 2 datas INSERT INTO Minor VALUES ('11111111','18355'); INSERT INTO Minor VALUES ('22222222','12158');
-- Inserting Prerequisites INSERT INTO Prerequisites VALUES ('01242', 'CPSC301'); INSERT INTO Prerequisites VALUES ('38123', 'MATH250B'); INSERT INTO Prerequisites VALUES ('45892', 'MATH270B'); INSERT INTO Prerequisites VALUES ('71236', 'CPSC351'); -- Inserting Degrees 3 datas INSERT INTO Degrees VALUES ('215468527','PhD Computer Science'); INSERT INTO Degrees VALUES ('215468527','MS Computer Science'); INSERT INTO Degrees VALUES ('315367375','PhD Mathematics');
-----------------------------------------------------------------------------------------------------------------
Prompt Queries
-- Part 1a SELECT C.TITLE, S.CLASSROOM, S.MEETING, S.BEGIN_TIME, S.END_TIME FROM Courses C, Sections S, Professors P WHERE P.SSN = '$prof_ssn' AND P.SSN = S.S_SSN AND S.S_CNUM = C.CNUM; -- Part 1b SELECT DISTINCT E.GRADE, C.TITLE, COUNT(GRADE) as 'Count' FROM Courses C, Sections S, Enrollment E WHERE C.CNUM = S.S_CNUM AND E.E_SNUM = S.SNUM AND C.CNUM = '$course_id' AND S.SNUM = '$section_id' GROUP BY GRADE; -- Part 2a SELECT S.CLASSROOM, S.MEETING, S.BEGIN_TIME, S.END_TIME, COUNT(E.E_SNUM) as 'Count' FROM Courses C, Enrollment E, Sections S WHERE E.E_SNUM = S.SNUM AND C.CNUM = S.S_CNUM AND C.CNUM = '$course_id' GROUP BY SNUM; -- Part 2b SELECT C.TITLE, E.GRADE FROM Enrollment E, Courses C, Sections S, Students T WHERE T.CWID = E.E_CWID AND E.E_SNUM = S.SNUM AND S.S_CNUM = C.CNUM AND E.E_CWID = '$stu_id'
-----------------------------------------------------------------------------------------------------------------
4. Source code of HTML, CSS, PHP
professor.php <!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script> </head> <?php $hostname = "mariadb"; $username = "cs332s13"; $password = "pmfF725I"; $mydb = "cs332s13"; $link = mysqli_connect($hostname, $username, $password, $mydb); if (!$link){ die("Unable to connect to host $hostName"); } if (isset($_POST['submit1'])){ echo ' Connected Successfully.'; mysqli_select_db($link, $mydb); $prof_ssn = $_POST["ssn"]; $query = "SELECT C.TITLE, S.CLASSROOM, S.MEETING, S.BEGIN_TIME, S.END_TIME FROM Courses C, Sections S, Professors P WHERE P.SSN = '$prof_ssn' AND P.SSN = S.S_SSN AND S.S_CNUM = C.CNUM"; $result = $link->query($query); if (!$result){ echo " query ran unsuccessfully: ($query) => " . mysqli_error($link); exit;
} $num_rows = mysqli_num_rows($result); if ($num_rows > 0){ echo " $num_rows rows were found <br>"; } else{ echo ' No data found'; exit; } } ?> <body> <div class="container-fluid text-secondary text-center"> <h2> Listed Classes: </h2> </div> <div class="container-fluid text-center"> <table class="table table-striped table-bordered table-hover"> <thead> <tr class="info text-center"> <th>Title</th> <th>Classrooms</th> <th>Meeting Days</th> <th>Start Time</th> <th>End Time</th> </tr> </thead> <tbody> <?php while($row = mysqli_fetch_assoc($result)) { ?> <tr> <td><?php echo $row["TITLE"];?> </td> <td><?php echo $row["CLASSROOM"];?></td> <td><?php echo $row["MEETING"];?></td> <td><?php echo $row["BEGIN_TIME"] ?? "";?></td> <td><?php echo $row["END_TIME"] ?? "";?></td> </tr>
<?php } ?> </tbody> </table> <div class="text-center"> <button type="button" class="btn btn-primary" onclick="goBack()">Return</button> </div> <script> function goBack() { window.history.back(); } </script> </div> </body> </html> <?php mysqli_close($link); ?>
course.php <!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> </head> <?php $hostname = "mariadb";
$username = "cs332s13"; $password = "pmfF725I"; $mydb = "cs332s13"; $link = mysqli_connect($hostname, $username, $password, $mydb); if (!$link){ die("Unable to connect to host $hostName"); } if (isset($_POST['submit2'])){ echo ' Connected Successfully.'; mysqli_select_db($link, $mydb); $course_number = $_POST["courseNum"]; $section_number = $_POST["sectionNum"]; $query = "SELECT DISTINCT E.GRADE, C.TITLE, COUNT(GRADE) as 'Count' FROM Courses C, Sections S, Enrollment E WHERE C.CNUM = S.S_CNUM AND E.E_SNUM = S.SNUM AND C.CNUM = '$course_number' AND S.SNUM = '$section_number' GROUP BY GRADE"; $result = $link->query($query); if (!$result){ echo " query ran unsuccessfully: ($query) => " . mysqli_error($link); exit; } $num_rows = mysqli_num_rows($result); if ($num_rows > 0){ echo " $num_rows rows were found <br>"; } else{ echo ' No data found'; exit; } } ?> <body> <div class="container-fluid text-secondary text-center"> <h2>Courses</h2> </div>
<div class="container-fluid text-center"> <table class="table table-striped table-bordered table-hover"> <thead> <tr class="info text-center"> <th>Grade</th> <th>Total</th> </tr> </thead> <tbody> <?php while($row = mysqli_fetch_assoc($result)) { ?> <tr> <td><?php echo $row["GRADE"];?></td> <td><?php echo $row["Count"];?></td> </tr> <?php } ?> </tbody> </table> <div class="text-center"> <button type="button" class="btn btn-primary" onclick="goBack()">Return</button> </div> <script> function goBack() { window.history.back(); } </script> </div> </body> </html> <?php mysqli_close($link); ?>
registration.php <!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> </head> <?php $hostname = "mariadb"; $username = "cs332s13"; $password = "pmfF725I"; $mydb = "cs332s13"; $link = mysqli_connect($hostname, $username, $password, $mydb); if (!$link){ die("Unable to connect to host $hostName"); } if (isset($_POST['submit3'])){ echo ' Connected Successfully.'; mysqli_select_db($link, $mydb); $course_number = $_POST["courseNum"]; $query = "SELECT S.CLASSROOM, S.MEETING, S.BEGIN_TIME, S.END_TIME, COUNT(E.E_SNUM) as 'Count' FROM Courses C, Enrollment E, Sections S WHERE E.E_SNUM = S.SNUM AND C.CNUM = S.S_CNUM AND C.CNUM = '$course_number' GROUP BY SNUM"; $result = $link->query($query); if (!$result){ echo " query ran unsuccessfully: ($query) => " . mysqli_error($link);
exit; } $num_rows = mysqli_num_rows($result); if ($num_rows > 0){ echo " $num_rows rows were found <br>"; } else{ echo ' No data found'; exit; } } ?> <body> <div class="container-fluid text-secondary text-center"> <h2>Class Registration</h2> </div> <div class="container-fluid text-center"> <table class="table table-striped table-bordered table-hover"> <thead> <tr class="info text-center"> <th>Classroom</th> <th>Meeting Times</th> <th>Start Time</th> <th>End Time</th> <th>Enrolled Students</th> </tr> </thead> <tbody> <?php while($row = mysqli_fetch_assoc($result)) { ?> <tr> <td><?php echo $row["CLASSROOM"];?></td> <td><?php echo $row["MEETING"];?></td> <td><?php echo $row["BEGIN_TIME"];?></td> <td><?php echo $row["END_TIME"];?></td> <td><?php echo $row["Count"];?></td> </tr>
<?php } ?> </tbody> </table> <div class="text-center"> <button type="button" class="btn btn-primary" onclick="goBack()">Return</button> </div> <script> function goBack() { window.history.back(); } </script> </div> </body> </html> <?php mysqli_close($link); ?>
Student.php <!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> </head> <?php
$hostname = "mariadb"; $username = "cs332s13"; $password = "pmfF725I"; $mydb = "cs332s13"; $link = mysqli_connect($hostname, $username, $password, $mydb); if (!$link){ die("Unable to connect to host $hostName"); } if (isset($_POST['submit4'])){ echo ' Connected Successfully.'; mysqli_select_db($link, $mydb); $studentCWID = $_POST["cwid"]; $query = "SELECT C.TITLE, E.GRADE FROM Enrollment E, Courses C, Sections S, Students T WHERE T.CWID = E.E_CWID AND E.E_SNUM = S.SNUM AND S.S_CNUM = C.CNUM AND E.E_CWID = '$studentCWID'"; $result = $link->query($query); if (!$result){ echo " query ran unsuccessfully: ($query) => " . mysqli_error($link); exit; } $num_rows = mysqli_num_rows($result); if ($num_rows > 0){ echo " $num_rows rows were found <br>"; } else{ echo ' No data found'; exit; } } ?> <body> <div class="container-fluid text-secondary text-center"> <h2>Transcript</h2> </div> <div class="container-fluid text-center">
<table class="table table-striped table-bordered table-hover"> <thead> <tr class="info text-center"> <th>Course</th> <th>Grade</th> </tr> </thead> <tbody> <?php while($row = mysqli_fetch_assoc($result)) { ?> <tr> <td><?php echo $row["TITLE"];?></td> <td><?php echo $row["GRADE"];?></td> </tr> <?php } ?> </tbody> </table> <div class="text-center"> <button type="button" class="btn btn-primary" onclick="goBack()">Return</button> </div> <script> function goBack() { window.history.back(); } </script> </div> </body> </html> <?php mysqli_close($link); ?>
index.html <!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="stylesheets/styles.css"> </head> <body> <br> <body class="container"> <div class=" container bg-primary"> <h1>CPSC 332 Project:</h1> </div> <div> <header> <h2>Professor Menu</h2> </header> <!--PROFESSOR SECTION--> <section> <form class="form-group" action="professor.php" method="POST"> <div class="professor"> <label for="ssn">SSN</label> <input class="form-control" type="ssn" name="ssn" id="ssn" placeholder="xxxxxxxxx" pattern="[0-9]{3}[0-9]{2}[0-9]{4}"> </div> <input type="submit" name="submit1" value="Search" id="submit"> <input type="reset" name="reset1" value="Reset" id="submit"> </form> <br>
<form class="form-group" action="course.php" method="POST"> <label for="name">Course Information</label> <div class="course"> <input class="form-control" type="number" id="cnum" name="courseNum" placeholder="Course Number"> <input class="form-control" type="number" id="snum" name="sectionNum" placeholder="Section Number"> </div> <input type="submit" name="submit2" value="Search" id="submit"> <input type="reset" name="reset2" value="Reset" id="submit"> </form> </section> <br> <body class="container"> <div> <header> <h2>Student Menu</h2> </header> <!--STUDENT SECTION--> <section> <form class="form-group" action="registration.php" method="POST"> <label for="name">Class Registration</label> <div class="course"> <input class="form-control" type="number" id="cnum" name="courseNum" placeholder="Course Number"> </div> <input type="submit" name="submit3" value="Search" id="submit"> <input type="reset" name="reset3" value="Reset" id="submit"> </form> <br> <form class="form-group" action="student.php" method="POST">
<label for="name">Student Transcript</label> <div class="data"> <input class="form-control" type="number" id="idNumber" name="cwid" placeholder="ID Number"> </div> <input type="submit" name="submit4" value="Submit" id="submit"> <input type="reset" name="reset4" value="Reset" id="submit"> </section> </div> </body> </div> </body> </html>
styles.css @import url(https://fonts.googleapis.com/css?family=Cabin+Condensed); html, body { height:100%; margin: 0; } body { background: linear-gradient(-45deg, #ffffff, #6fa5d8); background-size: 300% 300%; animation: gradient 15s ease infinite; } div { width:80%; margin: 0; } h1{ text-align: center; padding: 10px; margin: 0; } @keyframes gradient { 0% {
background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } } body { height: 100%; width: 100%; } .professor{ max-width: 20%; } .course{ display:flex; justify-content: space-between; max-width: 40%; } #submit{ background-color: #b89c23; } #idNumber{ width: auto; } #cnum{ width:auto; }
-----------------------------------------------------------------------------------------------------------------
5. Screenshots of Putty Database


-----------------------------------------------------------------------------------------------------------------
6. Screenshots of working interface


-----------------------------------------------------------------------------------------------------------------
